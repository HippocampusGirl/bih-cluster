



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Public documentation of the BIH HPC infrastructure.">
      
      
        <link rel="canonical" href="https://bihealth.github.io/bih-cluster/how-to/connect/gpu-nodes/">
      
      
        <meta name="author" content="BIH HPC IT">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>GPU Nodes - BIH HPC Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#how-to-connect-to-gpu-nodes" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://bihealth.github.io/bih-cluster" title="BIH HPC Docs" aria-label="BIH HPC Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              BIH HPC Docs
            </span>
            <span class="md-header-nav__topic">
              
                GPU Nodes
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/holtgrewe/bih-cluster/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    BIH HPC Docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://bihealth.github.io/bih-cluster" title="BIH HPC Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    BIH HPC Docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/holtgrewe/bih-cluster/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    BIH HPC Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Administrative
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Administrative
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/getting-access/" title="Getting Access" class="md-nav__link">
      Getting Access
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/resource-registration/" title="Resource Registration" class="md-nav__link">
      Resource Registration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/maintenance/" title="Maintenance etc." class="md-nav__link">
      Maintenance etc.
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting Help
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting Help
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../help/helpdesk/" title="HPC Helpdesk" class="md-nav__link">
      HPC Helpdesk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../help/good-tickets/" title="Good Tickets" class="md-nav__link">
      Good Tickets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../help/faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/for-the-impatient/" title="For the Impatient" class="md-nav__link">
      For the Impatient
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/job-scheduler/" title="Job Scheduler" class="md-nav__link">
      Job Scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/storage/" title="Storage Volumes" class="md-nav__link">
      Storage Volumes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Connecting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Connecting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../connecting/generate-key/" title="Generate Keys" class="md-nav__link">
      Generate Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../connecting/submit-key/" title="Submit Keys" class="md-nav__link">
      Submit Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../connecting/configure-ssh/" title="Configure Client" class="md-nav__link">
      Configure Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../connecting/from-external/" title="From External" class="md-nav__link">
      From External
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Slurm Scheduler
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Slurm Scheduler
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/quickstart/" title="Slurm Quickstart" class="md-nav__link">
      Slurm Quickstart
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/cheat-sheet/" title="Slurm Cheat Sheet" class="md-nav__link">
      Slurm Cheat Sheet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/migrating/" title="Migrating to Slurm" class="md-nav__link">
      Migrating to Slurm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/job-scripts/" title="Slurm Job Scripts" class="md-nav__link">
      Slurm Job Scripts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/snakemake/" title="Snakemake with Slurm" class="md-nav__link">
      Snakemake with Slurm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/rosetta-stone/" title="Slurm Rosetta Stone" class="md-nav__link">
      Slurm Rosetta Stone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../slurm/x11/" title="X11 Forwarding" class="md-nav__link">
      X11 Forwarding
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Best Practice
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Best Practice
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/project-structure/" title="Project Structure" class="md-nav__link">
      Project Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/software-craftmanship/" title="Software Craftmanship" class="md-nav__link">
      Software Craftmanship
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/screen-tmux/" title="Using Screen/Tmux" class="md-nav__link">
      Using Screen/Tmux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/bashrc-guide/" title="~/.bashrc Guide" class="md-nav__link">
      ~/.bashrc Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/temp-files/" title="Temporary Files" class="md-nav__link">
      Temporary Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../best-practice/env-modules/" title="Custom Environment Modules" class="md-nav__link">
      Custom Environment Modules
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Cubit Static Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Cubit Static Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/annotations/" title="Annotations" class="md-nav__link">
      Annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/app-support/" title="Application Support" class="md-nav__link">
      Application Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/databases/" title="Databases" class="md-nav__link">
      Databases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/exomes-panels/" title="Exomes and Panels" class="md-nav__link">
      Exomes and Panels
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/exon-lists/" title="Exon Lists" class="md-nav__link">
      Exon Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/index-files/" title="Precomputed Indexes" class="md-nav__link">
      Precomputed Indexes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cubit/references/" title="Reference Sequences" class="md-nav__link">
      Reference Sequences
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      How-To
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        How-To
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/contribute/" title="Contribute to Docs" class="md-nav__link">
      Contribute to Docs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../high-memory/" title="High-Memory Nodes" class="md-nav__link">
      High-Memory Nodes
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        GPU Nodes
      </label>
    
    <a href="./" title="GPU Nodes" class="md-nav__link md-nav__link--active">
      GPU Nodes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prequisites" class="md-nav__link">
    Prequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allocating-gpus" class="md-nav__link">
    Allocating GPUs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-1-who-is-using-the-gpus" class="md-nav__link">
    Bonus #1: Who is using the GPUs?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-2-is-the-gpu-running" class="md-nav__link">
    Bonus #2: Is the GPU running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fair-share-fair-use" class="md-nav__link">
    Fair Share / Fair Use
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/openmpi/" title="OpenMPI" class="md-nav__link">
      OpenMPI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/scientific-software/" title="Scientific Software" class="md-nav__link">
      Scientific Software
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/cell-ranger/" title="Cell Ranger" class="md-nav__link">
      Cell Ranger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/jupyter/" title="Jupyter" class="md-nav__link">
      Jupyter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/keras/" title="Keras" class="md-nav__link">
      Keras
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/matlab/" title="Matlab" class="md-nav__link">
      Matlab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/tensorflow/" title="Tensorflow" class="md-nav__link">
      Tensorflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../service/file-exchange/" title="File Exchange" class="md-nav__link">
      File Exchange
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Miscellaneous
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Miscellaneous
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../misc/publication-list/" title="Publication List" class="md-nav__link">
      Publication List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../misc/external-resources/" title="External Guides" class="md-nav__link">
      External Guides
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../misc/tips/" title="Misc. Tips" class="md-nav__link">
      Misc. Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../misc/ssh-basics/" title="SSH Basics" class="md-nav__link">
      SSH Basics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prequisites" class="md-nav__link">
    Prequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allocating-gpus" class="md-nav__link">
    Allocating GPUs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-1-who-is-using-the-gpus" class="md-nav__link">
    Bonus #1: Who is using the GPUs?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-2-is-the-gpu-running" class="md-nav__link">
    Bonus #2: Is the GPU running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fair-share-fair-use" class="md-nav__link">
    Fair Share / Fair Use
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/holtgrewe/bih-cluster/edit/master/bih-cluster/docs/how-to/connect/gpu-nodes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="how-to-connect-to-gpu-nodes">How-To: Connect to GPU Nodes<a class="headerlink" href="#how-to-connect-to-gpu-nodes" title="Permanent link">&para;</a></h1>
<p>The cluster has four nodes with four Tesla V100 GPUs each: <code>med030[1-4]</code>.</p>
<p>Connecting to a node with GPUs is easy.
You simply request a GPU using the <code>-p gpu --gres=gpu:tesla:COUNT</code> argument to <code>srun</code> and <code>batch</code>.
This will place your job in the <code>gpu</code> partition (which is where the GPU nodes live) and allocate a number of <code>COUNT</code> GPUs to your job.</p>
<blockquote>
<p><strong>Make sure to read the FAQ entry "<a href="Manual-Useful-Tips-Frequently-Asked-Questions#i-have-problems-connecting-to-the-gpu-node-whats-wrong">I have problems connecting to the GPU node! What's wrong?</a>".</strong></p>
</blockquote>
<h2 id="prequisites">Prequisites<a class="headerlink" href="#prequisites" title="Permanent link">&para;</a></h2>
<p>You have to register with <a href="mailto:hpc-gatekeeper@bihealth.de">hpc-gatekeeper@bihealth.de</a> for requesting access.
Afterwards, you can connect to the GPU nodes as shown below.</p>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<p>We will setup a miniconda installation with <code>pytorch</code> testing the GPU.
If you already have this setup then you can skip this step</p>
<div class="codehilite"><pre><span></span><code>med-login1:~$ srun --pty bash
med0703:~$ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
med0703:~$ bash Miniconda3-latest-Linux-x86_64.sh -b -p ~/miniconda3
med0703:~$ <span class="nb">source</span> ~/miniconda3/bin/activate
med0703:~$ conda create -y -n gpu-test <span class="nv">python</span><span class="o">=</span><span class="m">3</span> pytorch
med0703:~$ conda activate gpu-test
med0703:~$ python -c <span class="s1">&#39;import torch; print(torch.cuda.is_available())&#39;</span>
False
med0703:~$ <span class="nb">exit</span>
med-login1:~$
</code></pre></div>

<p>The <code>False</code> shows that CUDA is not available on the node but that is to be expected.
We're only warming up!</p>
<h2 id="allocating-gpus">Allocating GPUs<a class="headerlink" href="#allocating-gpus" title="Permanent link">&para;</a></h2>
<p>Let us now allocate a GPU.
The Slurm schedule will properly allocate GPUs for you and setup the environment variable that tell CUDA which devices are available.
The following dry run shows these environment variables (and that they are not available on the login node).</p>
<div class="codehilite"><pre><span></span><code>med-login1:~$ <span class="nb">export</span> <span class="p">|</span> grep CUDA_VISIBLE_DEVICES
med-login1:~$ srun -p gpu --gres<span class="o">=</span>gpu:tesla:1 --pty bash
med0303:~$ <span class="nb">export</span> <span class="p">|</span> grep CUDA_VISIBLE_DEVICES
<span class="nb">declare</span> -x <span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
med0303:~$ <span class="nb">exit</span>
med-login1:~$ srun -p gpu --gres<span class="o">=</span>gpu:tesla:2 --pty bash
med0303:~$ <span class="nb">export</span> <span class="p">|</span> grep CUDA_VISIBLE_DEVICES
<span class="nb">declare</span> -x <span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="s2">&quot;0,1&quot;</span>
</code></pre></div>

<p>You can see that you can also reserve multiple GPUs.
If we were to open two concurrent connections (e.g., in a <code>screen</code>) to the same node when allocating one GPU each, the allocated GPUs would be non-overlapping.
Note that any two jobs are isolated using Linux cgroups ("container" technology 🚀) so you cannot accidentally use a GPU of another job.</p>
<p>Now to the somewhat boring part where we show that CUDA actually works.</p>
<div class="codehilite"><pre><span></span><code>med-login1:~$ srun -p gpu --gres<span class="o">=</span>gpu:tesla:1 --pty bash
med0301:~$ nvcc --version
nvcc: NVIDIA <span class="o">(</span>R<span class="o">)</span> Cuda compiler driver
Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">2005</span>-2019 NVIDIA Corporation
Built on Wed_Oct_23_19:24:38_PDT_2019
Cuda compilation tools, release <span class="m">10</span>.2, V10.2.89
med0301:~$ <span class="nb">source</span> ~/miniconda3/bin/activate
med0301:~$ conda activate gpu-test
med0301:~$ python -c <span class="s1">&#39;import torch; print(torch.cuda.is_available())&#39;</span>
True
</code></pre></div>

<h2 id="bonus-1-who-is-using-the-gpus">Bonus <a class="magiclink magiclink-github magiclink-issue" href="https://github.com/squidfunk/mkdocs-material/issues/1" title="GitHub Issue: squidfunk/mkdocs-material#1">#1</a>: Who is using the GPUs?<a class="headerlink" href="#bonus-1-who-is-using-the-gpus" title="Permanent link">&para;</a></h2>
<p>Use <code>squeue</code> to find out about currently queued jobs (the <code>egrep</code> only keeps the header and entries in the <code>gpu</code> partition).</p>
<div class="codehilite"><pre><span></span><code>med-login1:~$ squeue <span class="p">|</span> egrep -iw <span class="s1">&#39;JOBID|gpu&#39;</span>
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST<span class="o">(</span>REASON<span class="o">)</span>
                <span class="m">33</span>       gpu     bash holtgrem  R       <span class="m">2</span>:26      <span class="m">1</span> med0301
</code></pre></div>

<h2 id="bonus-2-is-the-gpu-running">Bonus <a class="magiclink magiclink-github magiclink-issue" href="https://github.com/squidfunk/mkdocs-material/issues/2" title="GitHub Issue: squidfunk/mkdocs-material#2">#2</a>: Is the GPU running?<a class="headerlink" href="#bonus-2-is-the-gpu-running" title="Permanent link">&para;</a></h2>
<p>To find out how active the GPU nodes actually are, you can connect to the nodes (without allocating a GPU you can do this even if the node is full) and then use <code>nvidia-smi</code>.</p>
<div class="codehilite"><pre><span></span><code>med-login1:~$ srun --pty --nodelist<span class="o">=</span>med0301 bash
med0301:~$ nvidia-smi
Fri Mar  <span class="m">6</span> <span class="m">11</span>:10:08 <span class="m">2020</span>       
+-----------------------------------------------------------------------------+
<span class="p">|</span> NVIDIA-SMI <span class="m">440</span>.33.01    Driver Version: <span class="m">440</span>.33.01    CUDA Version: <span class="m">10</span>.2     <span class="p">|</span>
<span class="p">|</span>-------------------------------+----------------------+----------------------+
<span class="p">|</span> GPU  Name        Persistence-M<span class="p">|</span> Bus-Id        Disp.A <span class="p">|</span> Volatile Uncorr. ECC <span class="p">|</span>
<span class="p">|</span> Fan  Temp  Perf  Pwr:Usage/Cap<span class="p">|</span>         Memory-Usage <span class="p">|</span> GPU-Util  Compute M. <span class="p">|</span>
<span class="p">|</span><span class="o">===============================</span>+<span class="o">======================</span>+<span class="o">======================</span><span class="p">|</span>
<span class="p">|</span>   <span class="m">0</span>  Tesla V100-SXM2...  Off  <span class="p">|</span> <span class="m">00000000</span>:18:00.0 Off <span class="p">|</span>                    <span class="m">0</span> <span class="p">|</span>
<span class="p">|</span> N/A   62C    P0   246W / 300W <span class="p">|</span>  16604MiB / 32510MiB <span class="p">|</span>     <span class="m">99</span>%      Default <span class="p">|</span>
+-------------------------------+----------------------+----------------------+
<span class="p">|</span>   <span class="m">1</span>  Tesla V100-SXM2...  Off  <span class="p">|</span> <span class="m">00000000</span>:3B:00.0 Off <span class="p">|</span>                    <span class="m">0</span> <span class="p">|</span>
<span class="p">|</span> N/A   61C    P0   270W / 300W <span class="p">|</span>  16604MiB / 32510MiB <span class="p">|</span>    <span class="m">100</span>%      Default <span class="p">|</span>
+-------------------------------+----------------------+----------------------+
<span class="p">|</span>   <span class="m">2</span>  Tesla V100-SXM2...  Off  <span class="p">|</span> <span class="m">00000000</span>:86:00.0 Off <span class="p">|</span>                    <span class="m">0</span> <span class="p">|</span>
<span class="p">|</span> N/A   39C    P0    55W / 300W <span class="p">|</span>      0MiB / 32510MiB <span class="p">|</span>      <span class="m">0</span>%      Default <span class="p">|</span>
+-------------------------------+----------------------+----------------------+
<span class="p">|</span>   <span class="m">3</span>  Tesla V100-SXM2...  Off  <span class="p">|</span> <span class="m">00000000</span>:AF:00.0 Off <span class="p">|</span>                    <span class="m">0</span> <span class="p">|</span>
<span class="p">|</span> N/A   44C    P0    60W / 300W <span class="p">|</span>      0MiB / 32510MiB <span class="p">|</span>      <span class="m">4</span>%      Default <span class="p">|</span>
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
<span class="p">|</span> Processes:                                                       GPU Memory <span class="p">|</span>
<span class="p">|</span>  GPU       PID   Type   Process name                             Usage      <span class="p">|</span>
<span class="p">|</span><span class="o">=============================================================================</span><span class="p">|</span>
<span class="p">|</span>    <span class="m">0</span>     <span class="m">43461</span>      C   python                                     16593MiB <span class="p">|</span>
<span class="p">|</span>    <span class="m">1</span>     <span class="m">43373</span>      C   python                                     16593MiB <span class="p">|</span>
+-----------------------------------------------------------------------------+
</code></pre></div>

<h2 id="fair-share-fair-use">Fair Share / Fair Use<a class="headerlink" href="#fair-share-fair-use" title="Permanent link">&para;</a></h2>
<p><strong>Note that allocating a GPU makes it unavailble for everyone else.</strong>
<strong>There is currently no restriction in place on the GPU nodes, so please behave nicely and cooperatively.</strong>
If you see someone blocking the GPU nodes for long time, then first find out who it is.
You can type <code>getent passwd USER_NAME</code> on any cluster node to see the email address (and work phone number if added) of the user.
Send a friendly email to the other user, most likely they blocked the node accidentally.
If you cannot resolve the issue (e.g., the user is not reachable) then please contact <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#104;&#112;&#99;&#45;&#104;&#101;&#108;&#112;&#100;&#101;&#115;&#107;&#64;&#98;&#105;&#104;&#101;&#97;&#108;&#116;&#104;&#46;&#100;&#101;">&#104;&#112;&#99;&#45;&#104;&#101;&#108;&#112;&#100;&#101;&#115;&#107;&#64;&#98;&#105;&#104;&#101;&#97;&#108;&#116;&#104;&#46;&#100;&#101;</a> with your issue.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../high-memory/" title="High-Memory Nodes" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                High-Memory Nodes
              </span>
            </div>
          </a>
        
        
          <a href="../../software/openmpi/" title="OpenMPI" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                OpenMPI
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2016-2020, BIH HPC IT
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../../.."}})</script>
      
    
  </body>
</html>